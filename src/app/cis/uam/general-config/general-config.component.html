<!-- <input style="display:none;" type="text" [(ngModel)]="companyInfoId" [ngModelOptions]="{standalone: true}"> -->

<div id="maindatadiv">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="row">
        <div class="col-xl-12 col-lg-12 col-12 bottom-30">
            <div widget class="card">
                <div class="card-body widget-body">
                    <div class="row mbm-20">
                        <div class="col-lg-12 col-12 bottom-30">
                            <div class="clearfix">
                                <ul class="nav nav-tabs top pull-left w-100p">
                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="tab" href="#nuc"><i
                                                class="fa fa-user"></i>
                                            National User Config</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#dc"><i
                                                class="fa fa-user"></i>
                                            Designations Config</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="tab-content top">
                                <div class="tab-pane active" id="nuc">
                                    <div class="form-group col-md-4">
                                        <button type="button" class="btn btn-primary " class="btn btn-primary "
                                            data-toggle="modal" data-target="#addUser"
                                            (click)="createUser('IN032', 'Chief Surveyor General')">Create Chief
                                            Surveyor
                                            General</button>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <button type="button" class="btn btn-primary " data-toggle="modal"
                                            data-target="#addUser" data-dismiss="modal"
                                            (click)="createUser('IN031', 'Chief Director')">Create Chief
                                            Director</button>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <button type="button" class="btn btn-primary " class="btn btn-primary "
                                            data-toggle="modal" data-target="#addUser"
                                            (click)="createUser('IN030', 'Content Manager')">Create Content
                                            Manager</button>
                                    </div>
                                </div>
                                <div class="tab-pane" id="dc">
                                    <div class="form-group col-md-12">
                                        <div class="form-group col-md-3">
                                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                                data-target="#createDesignation" data-dismiss="modal">
                                                <i class="fa fa-plus"></i> Add Designation
                                            </button>
                                        </div>
                                        <table class="table table-sm">
                                            <thead style="background-color:#f6f6f6;font-size: 14px;">
                                                <tr>
                                                    <th>Designation Code</th>
                                                    <th>Designation Name</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let desi of designations">
                                                    <td>
                                                        {{desi.designationCode}}
                                                    </td>
                                                    <td>{{desi.designationName}}</td>
                                                    <!-- <td>
                                                        <button type="button" (click)="removeDesignation(desi)"
                                                            style=" border:none; background-color: red;"
                                                            class="btn btn-outline-warning">
                                                            <i style="color:white;" class="fa fa-close"></i>
                                                        </button>
                                                    </td> -->
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addUser" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
        style="display: none;">
        <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
            <p style="font-size: 20px; color: white">Loading...</p>
        </ngx-spinner>
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                    <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                            aria-hidden="true"></i>
                        Add {{nationalRole}}</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">Ã—</span></button>
                </div>
                <div class="modal-body">
                    <form class="row" [formGroup]="personalInForm">
                        <div class="form-group col-md-2">
                            <label class="form-control-label">Title</label>
                            <select formControlName="title" class="form-control">
                                <option value="Mr">Mr</option>
                                <option value="Mrs">Mrs</option>
                                <option value="Dr">Dr</option>
                                <option value="Miss">Miss</option>
                            </select>
                            <span class="help-block text-danger"
                                *ngIf="hasError && personalInForm.get('title').hasError('required')">* required</span>
                        </div>
                        <div class="form-group col-md-4"><label class="form-control-label">First
                                Name</label>
                            <input formControlName="firstname" maxlength="100" class="form-control" type="text">
                            <span class="help-block text-danger"
                                *ngIf="hasError && personalInForm.get('firstname').hasError('required')">*
                                required</span>
                        </div>
                        <div class="form-group col-md-3"><label class="form-control-label">Last
                                Name</label>
                            <input formControlName="lastname" maxlength="100" class="form-control" type="text">
                            <span class="help-block text-danger"
                                *ngIf="hasError && personalInForm.get('lastname').hasError('required')">*
                                required</span>
                        </div>
                        <div class="form-group col-md-4">
                            <label class="form-control-label">Contact email</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                                </div>
                                <input formControlName="email" maxlength="255" class="form-control" type="text">
                            </div>
                            <span class="help-block text-danger"
                                *ngIf="hasError && personalInForm.get('email').hasError('required')">* required</span>
                            <span class="help-block text-danger"
                                *ngIf="hasError && personalInForm.get('email').hasError('invalidEmail')">Invalid
                                email address</span>
                            <span class="help-block text-danger"
                                *ngIf="hasError && personalInForm.get('email').hasError('pattern')">Email must end
                                with drdlr.gov.za</span>
                        </div>
                        <div class="form-group col-md-4">
                            <label class="form-control-label">Mobile</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fa fa-phone"></i></span>
                                </div>
                                <input formControlName="mobile" maxlength="20" class="form-control" type="text">
                            </div>
                            <span class="help-block text-danger"
                                *ngIf="hasError && personalInForm.get('mobile').hasError('required')">*
                                required</span>
                            <span class="help-block text-danger"
                                *ngIf="hasError && personalInForm.get('mobile').hasError('minlength')">Minimum of 10
                                characters</span>
                        </div>

                        <div class="form-group col-md-4">
                            <label class="form-control-label">Telephone No</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fa fa-mobile-phone"></i></span>
                                </div>
                                <input formControlName="telephone" maxlength="20" class="form-control" type="text">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" (click)="createNationalUser()">Save</button>
                    <button type="button" id="saveNationalPopup" class="btn btn-default"
                        data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="createDesignation" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true " data-backdrop="static" data-keyboard="false">
        <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
            <p style="font-size: 20px; color: white">Loading...</p>
        </ngx-spinner>
        <div class="modal-dialog " role="document " style="width:320px">
            <div class="modal-content ">
                <div class="modal-header" style="color : white; background : #0e4f76;">
                    <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                            aria-hidden="true"></i>
                        Create Designation</h6>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <form [formGroup]="designationForm">
                            <div style="font-size: 13px;" class="form-group col-lg-12">
                                <input formControlName="name" type="text" class="form-control" placeholder="Name">
                                <span class="help-block text-danger"
                                    *ngIf="hasError && designationForm.get('name').hasError('required')"> *
                                    required</span>
                                <span class="help-block text-danger" *ngIf="hasError && duplicateDesignationValue">*
                                    already
                                    exists</span>
                            </div>
                            <div style="font-size: 13px;" class="form-group col-lg-12">
                                <input formControlName="description" type="text" class="form-control"
                                    placeholder="Description">
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer ">
                    <button type="button" class="btn btn-primary" (click)="createDesignation()">Save</button>
                    <button type="button" id="btnCreateDesignationClosePopup" class="btn btn-previous"
                        data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>