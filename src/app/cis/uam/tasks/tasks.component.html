<!-- <input style="display:none;" type="text" [(ngModel)]="companyInfoId" [ngModelOptions]="{standalone: true}"> -->

<div id="maindatadiv">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="row">
        <div class="col-xl-12 col-lg-12 col-12 bottom-30">
            <div widget class="card">
                <div class="card-body widget-body">
                    <div class="row mbm-20">
                        <div class="col-lg-12 col-12 bottom-30">
                            <div class="clearfix">
                                <ul class="nav nav-tabs top pull-left w-100p">
                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="tab" href="#in"><i
                                                class="fa fa-align-justify "></i>
                                            All Tasks</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#ct"><i
                                                class="fa fa-align-justify "></i>
                                            Closed Tasks</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="tab-content top">
                                <div class="tab-pane active" id="in">
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="fa fa-search"></i>
                                                </span>
                                                <input class="form-control custom-textbox" type="text"
                                                    [(ngModel)]="searchArrayText" placeholder="Search"
                                                    style="font-size: 13px;" (keyup)="updateFilter($event)" />
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3" style="text-align: left;">
                                            <div class="abc-checkbox">
                                                <input id="checkbox3" [(ngModel)]="ignoreDate"
                                                    (ngModelChange)="ignoreTheDate($event)" type="checkbox">
                                                <label for="checkbox3">Ignore Date Range</label>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3" style="text-align: right;">
                                            <button type="button" class="btn btn-primary"
                                                (click)="getAllTasksToRespond()"><i class="fa fa-refresh"></i>
                                                Refresh</button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-1">
                                            From Date:
                                        </div>
                                        <div class="form-group col-md-3">
                                            <div class="input-group-prepend">
                                                <input [disabled]="ignoreDate" class="form-control" type="date"
                                                    style="font-size: 14px;" (ngModelChange)="updateFromDate($event)"
                                                    [ngModel]="filterFromDate | date:'yyyy-MM-dd'"
                                                    name="filterFromDate" />
                                            </div>
                                        </div>
                                        <div class="form-group col-md-1">
                                            To Date:
                                        </div>
                                        <div class="form-group col-md-3">
                                            <div class="input-group-prepend">
                                                <input [disabled]="ignoreDate" class="form-control" type="date"
                                                    (ngModelChange)="updateToDate($event)"
                                                    [ngModel]="filterToDate | date:'yyyy-MM-dd'" name="filterToDate" />
                                            </div>
                                        </div>
                                        <div class="form-group col-md-1" style="text-align: left;">
                                            <button [disabled]="ignoreDate" type="button" class="btn btn-primary"
                                                (click)="getAllTasksToRespond()"><i class="fa fa-filter"></i>
                                                Submit</button>
                                        </div>
                                        <div class="form-group col-md-3" style="text-align: left;">
                                            <span class="help-block text-danger" *ngIf="filterValid">'To Date' should be
                                                after the 'From Date' </span>
                                        </div>
                                    </div>
                                    <!-- <div class="row">
                                        <div class="form-group col-md-1">
                                            User:
                                        </div>
                                        <div class="form-group col-md-2">
                                            <div class="input-group-prepend">
                                                <input class="form-control" type="text" [ngModel]="filterUsername"
                                                    name="filterUsername" />
                                            </div>
                                        </div>
                                        <div class="form-group col-md-1" style="text-align: left;">
                                            <button type="button" class="btn btn-primary"
                                                (click)="getAllTasksToRespond()"><i class="fa fa-filter"></i>
                                                Submit</button>
                                        </div>
                                        <div class="form-group col-md-3" style="text-align: left;">
                                            <span class="help-block text-danger" *ngIf="filterValid">Please enter
                                                username to search</span>
                                        </div>
                                    </div> -->
                                    <data-table [items]="allTasks" [itemCount]="itemCount" [indexColumn]="false"
                                        [pageLimits]="limits" [pagination]="true" [page]="1"
                                        (rowClick)="rowClick($event)" [selectOnRowClick]="true" [header]="false"
                                        [noDataMessage]="'No data to display!'" [multiSelect]="false"
                                        [substituteRows]="false" (reload)="reloadItems($event)">

                                        <data-table-column property="taskType" header="Task Type" [sortable]="true">
                                            <ng-template #dataTableCell let-item="item">
                                                <span *ngIf="item.taskType == 'EXTERNAL_USER_PENDING_APPROVAL'"
                                                    class="badge badge-primary">External User Registration
                                                    Approval</span>
                                                <span *ngIf="item.taskType == 'INTERNAL_USER_PENDING_APPROVAL'"
                                                    class="badge badge-primary">Internal User Registration
                                                    Approval</span>
                                                <span *ngIf="item.taskType == 'infoRequest'"
                                                    class="badge badge-primary">INFO REQUEST</span>
                                            </ng-template>
                                        </data-table-column>
                                        <data-table-column property="taskReferenceCode" header="Reference Code"
                                            [sortable]="true">
                                        </data-table-column>
                                        <data-table-column property="createdDate" header="Created Date"
                                            [sortable]="true">
                                        </data-table-column>
                                        <data-table-column property="initiatedUser" header="Initiated User"
                                            [sortable]="true">
                                        </data-table-column>
                                        <data-table-column property="taskStatus" header="Status" [sortable]="true">
                                            <ng-template #dataTableCell let-item="item">
                                                <span *ngIf="item.taskStatus == 'OPEN'"
                                                    class="badge badge-warning">Open</span>
                                                <span *ngIf="item.taskStatus == 'Assigned'"
                                                    class="badge badge-warning">Assigned to Manager</span>
                                                <span *ngIf="item.taskStatus == 'Reassigned'"
                                                    class="badge badge-warning">Assigned to Officer</span>
                                                <span *ngIf="item.taskStatus == 'UploadPOP'"
                                                    class="badge badge-warning">Payment Received</span>
                                                <span *ngIf="item.taskStatus == 'GenerateInvoice'"
                                                    class="badge badge-warning">Payment Pending</span>
                                                <span *ngIf="item.taskStatus == 'POPVerified'"
                                                    class="badge badge-warning">Payment Verified</span>
                                                <span *ngIf="item.taskStatus == 'Dispatch'"
                                                    class="badge badge-warning">Scrutinized</span>
                                                <span *ngIf="item.taskStatus == 'Scrutinise'"
                                                    class="badge badge-warning">Sent to Scrutinise</span>
                                            </ng-template>
                                        </data-table-column>
                                        <!-- <data-table-column [property]="'I4gRfqCode'" [header]="'Actions'"
                                            [resizable]="true">
                                            <ng-template #dataTableHeader let-item="item">
                                                <span>Action</span>
                                            </ng-template>
                                            <ng-template #dataTableCell let-item="item">
                                                <button class="btn btn-outline-primary btn-md dropdown-toggle"
                                                    style="height: 32px;font-size: 14px;" type="button"
                                                    data-toggle="dropdown">Actions
                                                    <span class="caret"></span>
                                                </button>
                                                <div class="action-dropdown">
                                                    <ul class="dropdown-menu"
                                                        style="font-size: 14px;border-color: rgb(109, 111, 183);">
                                                        <li *ngIf="item.taskType == 'infoRequest'">
                                                            <a class="dropdown-item" data-toggle="modal"
                                                                (click)="selectRequest(item)" data-target="#viewRequest"
                                                                data-dismiss="modal">
                                                                <i class="fa fa-check"></i>
                                                                Open Task
                                                            </a>
                                                        </li>
                                                        <li *ngIf="item.taskType == 'EXTERNAL_USER_PENDING_APPROVAL'">
                                                            <a class="dropdown-item" data-toggle="modal"
                                                                data-target="#viewUser"
                                                                (click)="getExternalUserInfo(item)"
                                                                data-dismiss="modal">
                                                                <i class="fa fa-check"></i>
                                                                Open Task
                                                            </a>
                                                        </li>
                                                        <li *ngIf="item.taskType == 'INTERNAL_USER_PENDING_APPROVAL'">
                                                            <a class="dropdown-item" data-toggle="modal"
                                                                data-target="#viewInternalUser"
                                                                (click)="getExternalUserInfo(item)"
                                                                data-dismiss="modal">
                                                                <i class="fa fa-check"></i>
                                                                Open Task
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-template>
                                        </data-table-column> -->
                                        <data-table-column [property]="'I4gRfqCode'" [header]="'Actions'"
                                            [resizable]="true">
                                            <ng-template #dataTableHeader let-item="item">
                                                <span>Action</span>
                                            </ng-template>
                                            <ng-template #dataTableCell let-item="item">
                                                <button *ngIf="item.taskType == 'EXTERNAL_USER_PENDING_APPROVAL'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewUser" (click)="getExternalUserInfo(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button *ngIf="item.taskType == 'INTERNAL_USER_PENDING_APPROVAL'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewInternalUser" (click)="getInternalUserInfo(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button
                                                    *ngIf="item.taskType == 'infoRequest' && item.taskStatus == 'Assigned'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewRequest" (click)="selectRequestTask(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button
                                                    *ngIf="item.taskType == 'infoRequest' && item.taskStatus == 'Reassigned'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewOfficerRequest" (click)="selectRequestTask(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button
                                                    *ngIf="item.taskType == 'infoRequest' && item.taskStatus == 'UploadPOP'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewOfficerRequest" (click)="selectRequestTask(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button
                                                    *ngIf="item.taskType == 'infoRequest' && item.taskStatus == 'POPVerified'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewOfficerRequest" (click)="selectRequestTask(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button
                                                    *ngIf="item.taskType == 'infoRequest' && item.taskStatus == 'GenerateInvoice'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewOfficerRequest" (click)="selectRequestTask(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button
                                                    *ngIf="item.taskType == 'infoRequest' && item.taskStatus == 'Dispatch'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewOfficerDispatchRequest"
                                                    (click)="selectRequestTask(item)" data-dismiss="modal"
                                                    type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button
                                                    *ngIf="item.taskType == 'infoRequest' && item.taskStatus == 'Scrutinise'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#viewSrutiniserRequest"
                                                    (click)="selectRequestTask(item)" data-dismiss="modal"
                                                    type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                            </ng-template>
                                        </data-table-column>
                                    </data-table>
                                </div>
                                <div class="tab-pane" id="ct">
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="fa fa-search"></i>
                                                </span>
                                                <input class="form-control custom-textbox" type="text"
                                                    [(ngModel)]="searchArrayTextClosed" placeholder="Search"
                                                    style="font-size: 13px;" (keyup)="updateFilterClosed($event)" />
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3" style="text-align: left;">
                                            <div class="abc-checkbox">
                                                <input id="checkbox3c" [(ngModel)]="ignoreDateClosed"
                                                    (ngModelChange)="ignoreTheDateClosed($event)" type="checkbox">
                                                <label for="checkbox3c">Ignore Date Range</label>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3" style="text-align: right;">
                                            <button type="button" class="btn btn-primary"
                                                (click)="getAllTasksToRespondClosed()"><i class="fa fa-refresh"></i>
                                                Refresh</button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-1">
                                            From Date:
                                        </div>
                                        <div class="form-group col-md-3">
                                            <div class="input-group-prepend">
                                                <input [disabled]="ignoreDateClosed" class="form-control" type="date"
                                                    style="font-size: 14px;"
                                                    (ngModelChange)="updateFromDateClosed($event)"
                                                    [ngModel]="filterFromDateClosed | date:'yyyy-MM-dd'"
                                                    name="filterFromDateClosed" />
                                            </div>
                                        </div>
                                        <div class="form-group col-md-1">
                                            To Date:
                                        </div>
                                        <div class="form-group col-md-3">
                                            <div class="input-group-prepend">
                                                <input [disabled]="ignoreDateClosed" class="form-control" type="date"
                                                    (ngModelChange)="updateToDateClosed($event)"
                                                    [ngModel]="filterToDateClosed | date:'yyyy-MM-dd'"
                                                    name="filterToDateClosed" />
                                            </div>
                                        </div>
                                        <div class="form-group col-md-1" style="text-align: left;">
                                            <button [disabled]="ignoreDateClosed" type="button" class="btn btn-primary"
                                                (click)="getAllTasksToRespondClosed()"><i class="fa fa-filter"></i>
                                                Submit</button>
                                        </div>
                                        <div class="form-group col-md-3" style="text-align: left;">
                                            <span class="help-block text-danger" *ngIf="filterValidClosed">'To Date'
                                                should be
                                                after the 'From Date' </span>
                                        </div>
                                    </div>
                                    <data-table [items]="allClosedTasks" [itemCount]="itemCount" [indexColumn]="false"
                                        [pageLimits]="limits" [pagination]="true" [page]="1"
                                        (rowClick)="rowClick($event)" [selectOnRowClick]="true" [header]="false"
                                        [noDataMessage]="'No data to display!'" [multiSelect]="false"
                                        [substituteRows]="false" (reload)="reloadItemsClosed($event)">

                                        <data-table-column property="taskType" header="Task Type" [sortable]="true">
                                            <ng-template #dataTableCell let-item="item">
                                                <span *ngIf="item.taskType == 'EXTERNAL_USER_PENDING_APPROVAL'"
                                                    class="badge badge-primary">External User Registration
                                                    Approval</span>
                                                <span *ngIf="item.taskType == 'INTERNAL_USER_PENDING_APPROVAL'"
                                                    class="badge badge-primary">Internal User Registration
                                                    Approval</span>
                                                <span *ngIf="item.taskType == 'infoRequest'"
                                                    class="badge badge-primary">INFO REQUEST</span>
                                            </ng-template>
                                        </data-table-column>
                                        <data-table-column property="taskReferenceCode" header="Reference Code"
                                            [sortable]="true">
                                        </data-table-column>
                                        <data-table-column property="updatedDate" header="Closed Date"
                                            [sortable]="true">
                                        </data-table-column>
                                        <data-table-column [property]="'I4gRfqCode'" [header]="'Actions'"
                                            [resizable]="true">
                                            <ng-template #dataTableHeader let-item="item">
                                                <span>Action</span>
                                            </ng-template>
                                            <ng-template #dataTableCell let-item="item">
                                                <button *ngIf="item.taskType == 'EXTERNAL_USER_PENDING_APPROVAL'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#showUser" (click)="getExternalUserInfo(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button *ngIf="item.taskType == 'INTERNAL_USER_PENDING_APPROVAL'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#showInternalUser" (click)="getInternalUserInfo(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                                <button
                                                    *ngIf="item.taskType == 'infoRequest' && item.taskStatus == 'Closed'"
                                                    class="btn btn-primary btn-md btn-rounded"
                                                    style="height: 32px;font-size: 14px;" data-toggle="modal"
                                                    data-target="#showRequest" (click)="selectRequestTask(item)"
                                                    data-dismiss="modal" type="button"> Open Task
                                                    <span class="caret"></span>
                                                </button>
                                            </ng-template>
                                        </data-table-column>
                                    </data-table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a style="display:none" id="downloadLink"></a>
</div>

<div class="modal fade" id="viewUser" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none;">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View User</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="personalForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#pi"><i class="fa fa-users"></i>
                                        Personal Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#role"><i class="fa fa-users"></i>
                                        Roles</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="pi">
                                <div class="row">
                                    <div class="form-group col-md-2">
                                        <label class="form-control-label">Title</label>
                                        <select formControlName="salutation" class="form-control">
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Dr">Dr</option>
                                            <option value="Miss">Miss</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-4"><label class="form-control-label">First
                                            Name</label>
                                        <input formControlName="firstname" maxlength="100" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-3"><label class="form-control-label">Last
                                            Name</label>
                                        <input formControlName="lastname" maxlength="100" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Organization Type</label>
                                        <select formControlName="orgtype" class="form-control">
                                            <option value="{{t.organizationTypeCode}}={{t.organizationTypeName}}"
                                                *ngFor="let t of organizationTypes">{{t.organizationTypeName}}
                                            </option>
                                        </select>
                                    </div>

                                    <div class="form-group col-md-2">
                                        <label class="form-control-label">Sector</label>
                                        <div class="input-group">
                                            <select formControlName="sector" class="form-control">
                                                <option value="{{t.code}}={{t.name}}" *ngFor="let t of sectors">
                                                    {{t.name}}</option>
                                            </select>
                                            <span class="help-block text-danger"
                                                *ngIf="hasError && personalForm.get('sector').hasError('required')">*
                                                required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="form-control-label">Contact email</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                                            </div>
                                            <input formControlName="email" maxlength="255" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Mobile</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-phone"></i></span>
                                            </div>
                                            <input formControlName="mobile" maxlength="20" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Telephone No</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-mobile-phone"></i></span>
                                            </div>
                                            <input formControlName="telephone" maxlength="20" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-4"> <label class="form-control-label">Address Line
                                            1</label>
                                        <input formControlName="addressline1" maxlength="255" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="form-control-label">Address Line 2</label>
                                        <input formControlName="addressline2" maxlength="255" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="form-control-label">Address Line 3</label>
                                        <input formControlName="addressline3" maxlength="255" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label class="form-control-label">Postal Code</label>
                                        <input formControlName="zipcode" maxlength="255" class="form-control"
                                            type="text">
                                    </div>
                                    <div *ngIf="userResponse.mainRoleCode === 'EX002' || userResponse.mainRoleCode === 'EX010'"
                                        class="form-group col-md-3">
                                        <button class="btn btn-primary btn-md btn-rounded"
                                            style="height: 32px;font-size: 14px;"
                                            (click)="downloadRegistrationDocument()" type="button"> <i
                                                class="fa fa-download"></i>
                                            Download Reg Doc
                                            <span class="caret"></span>
                                        </button>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Mode of Communcation</label>
                                        <div class="input-group">
                                            <select formControlName="communication" class="form-control">
                                                <option value="{{t.communicationTypeCode}}={{t.communicationTypeName}}"
                                                    *ngFor="let t of communcationTypes">{{t.communicationTypeName}}
                                                </option>
                                            </select>
                                            <span class="help-block text-danger"
                                                *ngIf="hasError && personalForm.get('communication').hasError('required')">*
                                                required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-7"></div>
                                    <div class="form-group col-md-4">
                                        <div class="abc-checkbox abc-checkbox-primary">
                                            <input id="checkbox1" formControlName="news" type="checkbox">
                                            <label for="checkbox1">Enable News Notifications</label>
                                        </div>
                                        <div class="abc-checkbox abc-checkbox-primary">
                                            <input id="checkbox2" formControlName="events" type="checkbox">
                                            <label for="checkbox2">Enable Events Notifications</label>
                                        </div>
                                        <div class="abc-checkbox abc-checkbox-primary">
                                            <input id="checkbox3" formControlName="information" type="checkbox">
                                            <label for="checkbox3">Enable Information Notifications</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="role">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Role Name</th>
                                                <th>Province</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let role of allExternalroles">
                                                <td>
                                                    {{role.userRoleName}}
                                                </td>
                                                <td>{{role.userProvinceName}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div *ngIf="isApproved == 'PENDING'" class="form-group col-12"
                                style="text-align: left;font-size: 19px;padding-top: 20px;color: #ff7500;">
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input id="radio1" type="radio" name="radioInline" (change)="onItemChange('YES')"
                                        class="custom-control-input radio-warning">
                                    <label class="custom-control-label" for="radio1">Approve</label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input id="radio2" type="radio" name="radioInline"
                                        (change)="onItemChange('REJECTED')" class="custom-control-input radio-warning">
                                    <label class="custom-control-label" for="radio2">Reject</label>
                                </div>
                                <div *ngIf="result == 'REJECTED'" class="form-group">
                                    <label class="form-control-label"
                                        style="color:black; font-size:12px;">Reason</label>
                                    <input maxlength="255" [(ngModel)]="reason" class="form-control" type="text">
                                </div>
                                <span class="help-block text-danger" *ngIf="hasError && result.length == 0">*
                                    required</span>
                            </div>
                            <div *ngIf="isApproved == 'WAITING'" class="form-group col-12"
                                style="text-align: left;font-size: 19px;padding-top: 20px;color: #da4e17;">
                                Waiting for Surveyor to approve the assistant...
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" (click)="approveRejectExternalUser()">Submit & Close
                    Task</button>
                <button type="button" id="approveRejectPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="showUser" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none;">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View User</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="personalForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#spi"><i class="fa fa-users"></i>
                                        Personal Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#srole"><i class="fa fa-users"></i>
                                        Roles</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="spi">
                                <div class="row">
                                    <div class="form-group col-md-2">
                                        <label class="form-control-label">Title</label>
                                        <select disabled formControlName="salutation" class="form-control">
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Dr">Dr</option>
                                            <option value="Miss">Miss</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-4"><label class="form-control-label">First
                                            Name</label>
                                        <input disabled formControlName="firstname" maxlength="100" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-3"><label class="form-control-label">Last
                                            Name</label>
                                        <input disabled formControlName="lastname" maxlength="100" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Organization Type</label>
                                        <select disabled formControlName="orgtype" class="form-control">
                                            <option value="{{t.organizationTypeCode}}={{t.organizationTypeName}}"
                                                *ngFor="let t of organizationTypes">{{t.organizationTypeName}}
                                            </option>
                                        </select>
                                    </div>

                                    <div class="form-group col-md-2">
                                        <label class="form-control-label">Sector</label>
                                        <div class="input-group">
                                            <select disabled formControlName="sector" class="form-control">
                                                <option value="{{t.code}}={{t.name}}" *ngFor="let t of sectors">
                                                    {{t.name}}</option>
                                            </select>
                                            <span class="help-block text-danger"
                                                *ngIf="hasError && personalForm.get('sector').hasError('required')">*
                                                required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="form-control-label">Contact email</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                                            </div>
                                            <input disabled formControlName="email" maxlength="255" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Mobile</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-phone"></i></span>
                                            </div>
                                            <input disabled formControlName="mobile" maxlength="20" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Telephone No</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-mobile-phone"></i></span>
                                            </div>
                                            <input disabled formControlName="telephone" maxlength="20"
                                                class="form-control" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-4"> <label class="form-control-label">Address Line
                                            1</label>
                                        <input disabled formControlName="addressline1" maxlength="255"
                                            class="form-control" type="text">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="form-control-label">Address Line 2</label>
                                        <input disabled formControlName="addressline2" maxlength="255"
                                            class="form-control" type="text">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="form-control-label">Address Line 3</label>
                                        <input disabled formControlName="addressline3" maxlength="255"
                                            class="form-control" type="text">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label class="form-control-label">Postal Code</label>
                                        <input disabled formControlName="zipcode" maxlength="255" class="form-control"
                                            type="text">
                                    </div>
                                    <div *ngIf="userResponse.mainRoleCode === 'EX002' || userResponse.mainRoleCode === 'EX010'"
                                        class="form-group col-md-3">
                                        <button class="btn btn-primary btn-md btn-rounded"
                                            style="height: 32px;font-size: 14px;"
                                            (click)="downloadRegistrationDocument()" type="button"> <i
                                                class="fa fa-download"></i>
                                            Download Reg Doc
                                            <span class="caret"></span>
                                        </button>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Mode of Communcation</label>
                                        <div class="input-group">
                                            <select disabled formControlName="communication" class="form-control">
                                                <option value="{{t.communicationTypeCode}}={{t.communicationTypeName}}"
                                                    *ngFor="let t of communcationTypes">{{t.communicationTypeName}}
                                                </option>
                                            </select>
                                            <span class="help-block text-danger"
                                                *ngIf="hasError && personalForm.get('communication').hasError('required')">*
                                                required</span>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-7"></div>
                                    <div class="form-group col-md-4">
                                        <div class="abc-checkbox abc-checkbox-primary">
                                            <input disabled id="checkbox1" formControlName="news" type="checkbox">
                                            <label for="checkbox1">Enable News Notifications</label>
                                        </div>
                                        <div class="abc-checkbox abc-checkbox-primary">
                                            <input disabled id="checkbox2" formControlName="events" type="checkbox">
                                            <label for="checkbox2">Enable Events Notifications</label>
                                        </div>
                                        <div class="abc-checkbox abc-checkbox-primary">
                                            <input disabled id="checkbox3" formControlName="information"
                                                type="checkbox">
                                            <label for="checkbox3">Enable Information Notifications</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="srole">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Role Name</th>
                                                <th>Province</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let role of allExternalroles">
                                                <td>
                                                    {{role.userRoleName}}
                                                </td>
                                                <td>{{role.userProvinceName}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div *ngIf="isApproved == 'YES'" class="form-group col-12"
                                style="text-align: left;font-size: 19px;padding-top: 20px;color: #337c08;">
                                Approved
                            </div>
                            <div *ngIf="isApproved == 'NO'" class="form-group col-12"
                                style="text-align: left;font-size: 19px;padding-top: 20px;color: #961b05;">
                                Rejected
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="approveRejectPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="viewInternalUser" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none;">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View User</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="personalInForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#ipi"><i class="fa fa-users"></i>
                                        Personal Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#irole"><i class="fa fa-users"></i>
                                        Roles</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="ipi">
                                <div class="row">
                                    <div class="form-group col-md-2">
                                        <label class="form-control-label">Title</label>
                                        <select formControlName="title" class="form-control">
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Dr">Dr</option>
                                            <option value="Miss">Miss</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-4"><label class="form-control-label">First
                                            Name</label>
                                        <input formControlName="firstname" maxlength="100" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-3"><label class="form-control-label">Last
                                            Name</label>
                                        <input formControlName="lastname" maxlength="100" class="form-control"
                                            type="text">
                                    </div>

                                    <div class="form-group col-md-4">
                                        <label class="form-control-label">Contact email</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                                            </div>
                                            <input formControlName="email" maxlength="255" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Mobile</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-phone"></i></span>
                                            </div>
                                            <input formControlName="mobile" maxlength="20" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Telephone No</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-mobile-phone"></i></span>
                                            </div>
                                            <input formControlName="telephone" maxlength="20" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="irole">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Role</th>
                                                <th>Section</th>
                                                <th>Province</th>
                                                <th>Signed Access Doc1</th>
                                                <th>Permission</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let role of allInternalRoles">
                                                <td>
                                                    {{role.roleName}}
                                                </td>
                                                <td>{{role.sectionName}}</td>
                                                <td>{{role.provinceName}}</td>
                                                <td>
                                                    <button class="btn btn-primary btn-md btn-rounded"
                                                        style="height: 32px;font-size: 14px;"
                                                        (click)="downloadFile(role)" type="button"> <i
                                                            class="fa fa-download"></i>
                                                        Download
                                                        <span class="caret"></span>
                                                    </button>
                                                </td>
                                                <td>
                                                    <span *ngIf="role.isActive == 'Y'">Approved</span>
                                                    <div *ngIf="role.isActive == 'N' || role.isActive == 'NY' || role.isActive == 'NR'"
                                                        class="custom-control custom-radio custom-control-inline">
                                                        <input id="radio{{role.userRoleId}}1" type="radio"
                                                            name="radioInline{{role.userRoleId}}"
                                                            (change)="activate('NY', role)"
                                                            class="custom-control-input radio-warning">
                                                        <label class="custom-control-label"
                                                            for="radio{{role.userRoleId}}1">Approve</label>
                                                    </div>
                                                    <div *ngIf="role.isActive == 'N' || role.isActive == 'NR' || role.isActive == 'NY'"
                                                        class="custom-control custom-radio custom-control-inline">
                                                        <input id="radio{{role.userRoleId}}2" type="radio"
                                                            name="radioInline{{role.userRoleId}}"
                                                            (change)="activate('NR', role)"
                                                            class="custom-control-input radio-warning">
                                                        <label class="custom-control-label"
                                                            for="radio{{role.userRoleId}}2">Reject</label>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-12"
                                style="text-align: left;font-size: 19px;padding-top: 20px;color: #ff7500;">
                                <!-- <div class="custom-control custom-radio custom-control-inline">
                                    <input id="radio3" type="radio" name="radioInline" (change)="onItemChange('YES')"
                                        class="custom-control-input radio-warning">
                                    <label class="custom-control-label" for="radio3">Approve</label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input id="radio4" type="radio" name="radioInline"
                                        (change)="onItemChange('REJECTED')" class="custom-control-input radio-warning">
                                    <label class="custom-control-label" for="radio4">Reject</label>
                                </div>
                                <div *ngIf="result == 'REJECTED'" class="form-group">
                                    <label class="form-control-label"
                                        style="color:black; font-size:12px;">Reason</label>
                                    <input maxlength="255" [(ngModel)]="reason1" class="form-control" type="text">
                                </div>
                                <span class="help-block text-danger" *ngIf="hasError && result.length == 0">*
                                    required</span>  -->
                                <span class="help-block text-danger" *ngIf="errorInternal">*
                                    Either Approve or Reject roles before submitting...</span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" (click)="updateRoles()">Submit & Close
                    Task</button>
                <button type="button" id="approveRejectInternalPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="showInternalUser" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none;">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View User</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="personalInForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#sipi"><i
                                            class="fa fa-users"></i>
                                        Personal Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#sirole"><i class="fa fa-users"></i>
                                        Roles</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="sipi">
                                <div class="row">
                                    <div class="form-group col-md-2">
                                        <label class="form-control-label">Title</label>
                                        <select disabled formControlName="title" class="form-control">
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Dr">Dr</option>
                                            <option value="Miss">Miss</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-4"><label class="form-control-label">First
                                            Name</label>
                                        <input disabled formControlName="firstname" maxlength="100" class="form-control"
                                            type="text">
                                    </div>
                                    <div class="form-group col-md-3"><label class="form-control-label">Last
                                            Name</label>
                                        <input disabled formControlName="lastname" maxlength="100" class="form-control"
                                            type="text">
                                    </div>

                                    <div class="form-group col-md-4">
                                        <label class="form-control-label">Contact email</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                                            </div>
                                            <input disabled formControlName="email" maxlength="255" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Mobile</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-phone"></i></span>
                                            </div>
                                            <input disabled formControlName="mobile" maxlength="20" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-control-label">Telephone No</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa fa-mobile-phone"></i></span>
                                            </div>
                                            <input disabled formControlName="telephone" maxlength="20"
                                                class="form-control" type="text">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="sirole">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Role</th>
                                                <th>Section</th>
                                                <th>Province</th>
                                                <th>Signed Access Doc1</th>
                                                <th>Permission</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let role of allInternalRoles">
                                                <td>
                                                    {{role.roleName}}
                                                </td>
                                                <td>{{role.sectionName}}</td>
                                                <td>{{role.provinceName}}</td>
                                                <td>
                                                    <button class="btn btn-primary btn-md btn-rounded"
                                                        style="height: 32px;font-size: 14px;"
                                                        (click)="downloadFile(role)" type="button"> <i
                                                            class="fa fa-download"></i>
                                                        Download
                                                        <span class="caret"></span>
                                                    </button>
                                                </td>
                                                <td>
                                                    <span *ngIf="role.isActive == 'Y'">Approved</span>
                                                    <div *ngIf="role.isActive == 'N' || role.isActive == 'NY' || role.isActive == 'NR'"
                                                        class="custom-control custom-radio custom-control-inline">
                                                        <input id="radio{{role.userRoleId}}1" type="radio"
                                                            name="radioInline{{role.userRoleId}}"
                                                            (change)="activate('NY', role)"
                                                            class="custom-control-input radio-warning">
                                                        <label class="custom-control-label"
                                                            for="radio{{role.userRoleId}}1">Approve</label>
                                                    </div>
                                                    <div *ngIf="role.isActive == 'N' || role.isActive == 'NR' || role.isActive == 'NY'"
                                                        class="custom-control custom-radio custom-control-inline">
                                                        <input id="radio{{role.userRoleId}}2" type="radio"
                                                            name="radioInline{{role.userRoleId}}"
                                                            (change)="activate('NR', role)"
                                                            class="custom-control-input radio-warning">
                                                        <label class="custom-control-label"
                                                            for="radio{{role.userRoleId}}2">Reject</label>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="approveRejectInternalPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="viewRequest" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none;">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View Request</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="requestForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#ri1"><i
                                            class="fa fa-info-circle"></i>
                                        Requester Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#irole1"><i class="fa fa-th-list"></i>
                                        Request Items</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#irif"><i class="fa fa-list-ul"></i>
                                        Request Flow</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#vrd"><i class="fa fa-files-o"></i>
                                        Documents</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="ri1">
                                <form [formGroup]="requestForm">
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Username</label>
                                            <input formControlName="userName" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"></div>
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">First Name</label>
                                            <input formControlName="firstName" class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Surname</label>
                                            <input formControlName="surName" class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Request Type</label>
                                            <input formControlName="requestTypeName" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Format
                                                Type</label>
                                            <input formControlName="formatType" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Method</label>
                                            <input formControlName="deliveryMethod" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div *ngIf="this.requestForm.get('formatType').value.includes('Email') || this.requestForm.get('formatType').value.includes('FTP')"
                                            class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Email</label>
                                            <input formControlName="email" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div *ngIf="this.requestForm.get('deliveryMethod').value.includes('Courier')"
                                            class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                1</label>
                                            <input formControlName="postalAddress1" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div *ngIf="this.requestForm.get('deliveryMethod').value.includes('Courier')"
                                            class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                2</label>
                                            <input formControlName="postalAddress2" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div *ngIf="this.requestForm.get('deliveryMethod').value.includes('Courier')"
                                            class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                3</label>
                                            <input formControlName="postalAddress3" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane" id="irole1">
                                <div class="row">
                                    <div class="form-group col-md-12">
                                        <button type="button" class="btn btn-primary" data-toggle="modal"
                                            data-target="#addRequestItem">
                                            <i class="fa fa-plus"></i> Add Cost Item
                                        </button>
                                    </div>
                                    <div class="col-sm-12">
                                        <table class="table table-sm">
                                            <thead style="background-color:#f6f6f6;font-size: 14px;">
                                                <tr>
                                                    <th>Item</th>
                                                    <th>Actions</th>
                                                    <th>Cost</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of selectedRequestItems; let i = index">
                                                    <td>
                                                        {{item.gazetteType1}}
                                                    </td>
                                                    <td>
                                                        <button *ngIf="item.requestGazetteType == 'REQUEST'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Search Request Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'SEARCH'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Show Item Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'COST_ITEM'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Request Cost Details
                                                            <span class="caret"></span>
                                                        </button>
                                                    </td>
                                                    <td>
                                                        <span *ngIf="item.requestCost !== '0.00'">R {{item.requestCost}}</span>
                                                        <span *ngIf="item.requestCost == '0.00'"></span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="irif">
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Request Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskReferenceCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Open Date : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskOpenDate}}</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <!-- <th>Task Code</th> -->
                                                <!-- <th>Task Open Date</th> -->
                                                <th>Task Done By</th>
                                                <th>Task Status</th>
                                                <th>Task Assigned To</th>
                                                <th>Action Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let flow of tasklifecycle">
                                                <!-- <td>
                                                    {{flow.taskCode}}
                                                </td> -->
                                                <!-- <td>{{flow.taskOpenDate}}</td> -->
                                                <td>{{flow.taskDoneUserName}}</td>
                                                <td *ngIf="flow.assignedUser !== null">
                                                    {{flow.taskStatus}}
                                                </td>
                                                <td *ngIf="flow.assignedUser == null">
                                                    Initiated
                                                </td>
                                                <td>{{flow.assignedUser}}</td>

                                                <td>{{flow.createdDate}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane" id="vrd">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Type</th>
                                                <th>Documents</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Request Documents</td>
                                                <td *ngIf="requestDocuments?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDocuments()">Download</button>
                                                </td>
                                                <td *ngIf="requestDocuments?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Payment Confirmation</td>
                                                <td *ngIf="paymentConfirmation?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadPaymentConfirmation()">Download</button>
                                                </td>
                                                <td *ngIf="paymentConfirmation?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Invoice</td>
                                                <td *ngIf="invoiceDocs?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadInvoice()">Download</button>
                                                </td>
                                                <td *ngIf="invoiceDocs?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Supporting Documents</td>
                                                <td *ngIf="dispatchDocsList?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDispatchDocs()">Download</button>
                                                </td>
                                                <td *ngIf="dispatchDocsList?.length == 0"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 col-12 vertical-tabs bottom-30">
                        <div class="row pl-3 pr-3">
                            <ul class="nav flex-column left col-3">
                                <li class="nav-item" *ngFor="let element of targets">
                                    <a class="nav-link" *ngIf="element.restRequest == 'restMove'"
                                        (click)="selectFlow('flow2')" href="#mp" data-toggle="tab">Move to Province</a>
                                    <a class="nav-link" *ngIf="element.restRequest == 'restReassign'"
                                        (click)="selectFlow('flow3')" href="#lb" data-toggle="tab">Assign to Officer</a>
                                </li>
                            </ul>
                            <div class="tab-content col-9">
                                <div class="tab-pane" id="mp">
                                    <div class="col-sm-6">
                                        <label class="form-control-label">Select Province</label>
                                        <select (change)="changeInfoManagerProvince($event.target.value)"
                                            class="form-control">
                                            <option value=""></option>
                                            <option value="{{t.code}}" *ngFor="let t of provinces">
                                                {{t.name}}</option>
                                        </select>
                                        <span class="help-block text-danger"
                                            *ngIf="hasInfoManagerError && selectedProvince.length === 0"> *
                                            required</span>
                                    </div>
                                </div>
                                <div class="tab-pane" id="lb">
                                    <div class="col-sm-6">
                                        <label class="form-control-label">Select Officer</label>
                                        <select (change)="changeInfoManageToOfficer($event.target.value)"
                                            class="form-control">
                                            <option value=""></option>
                                            <option value="{{t.userCode}}={{t.userName}}" *ngFor="let t of officers">
                                                {{t.firstName}} {{t.surname}}</option>
                                        </select>
                                        <span class="help-block text-danger"
                                            *ngIf="hasInfoManagerError && selectedInfoOfficer.length === 0"> *
                                            required</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" (click)="submitInformationManagerTask()">Submit & Close
                    Task</button>
                <button type="button" id="requestAssignTaskPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="showRequest" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none;">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View Request</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="requestForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#sri1"><i
                                            class="fa fa-info-circle"></i>
                                        Requester Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#sirole1"><i class="fa fa-th-list"></i>
                                        Request Items</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#sirif"><i class="fa fa-list-ul"></i>
                                        Request Flow</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#srd"><i class="fa fa-files-o"></i>
                                        Documents</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="sri1">
                                <form [formGroup]="requestForm">
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Username</label>
                                            <input disabled formControlName="userName" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Request Type</label>
                                            <input disabled formControlName="requestTypeName" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Format
                                                Type</label>
                                            <input disabled formControlName="formatType" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Method</label>
                                            <input disabled formControlName="deliveryMethod" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div *ngIf="this.requestForm.get('formatType').value.includes('Email') || this.requestForm.get('formatType').value.includes('FTP')"
                                            class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Email</label>
                                            <input disabled formControlName="email" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                1</label>
                                            <input disabled formControlName="postalAddress1" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                2</label>
                                            <input disabled formControlName="postalAddress2" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                3</label>
                                            <input disabled formControlName="postalAddress3" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane" id="sirole1">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <table class="table table-sm">
                                            <thead style="background-color:#f6f6f6;font-size: 14px;">
                                                <tr>
                                                    <th>Item</th>
                                                    <th>Actions</th>
                                                    <th>Cost</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of selectedRequestItems; let i = index">
                                                    <td>
                                                        {{item.gazetteType1}}
                                                    </td>
                                                    <td>
                                                        <button *ngIf="item.requestGazetteType == 'REQUEST'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Search Request Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'COST_ITEM'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Request Cost Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'SEARCH'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Show Item Details
                                                            <span class="caret"></span>
                                                        </button>
                                                    </td>
                                                    <td>
                                                            <span *ngIf="item.requestCost !== '0.00'">R {{item.requestCost}}</span>
                                                            <span *ngIf="item.requestCost == '0.00'"></span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="sirif">
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Request Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskReferenceCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Open Date : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskOpenDate}}</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <!-- <th>Task Code</th> -->
                                                <!-- <th>Task Open Date</th> -->
                                                <th>Task Done By</th>
                                                <th>Task Status</th>
                                                <th>Task Assigned To</th>
                                                <!-- <th>Task Assigned By</th> -->
                                                <th>Action Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let flow of tasklifecycle">
                                                <!-- <td>
                                                    {{flow.taskCode}}
                                                </td> -->
                                                <!-- <td>{{flow.taskOpenDate}}</td> -->
                                                <td>{{flow.taskDoneUserName}}</td>
                                                <td *ngIf="flow.assignedUser !== null">
                                                    {{flow.taskStatus}}
                                                </td>
                                                <td *ngIf="flow.assignedUser == null">
                                                    Initiated
                                                </td>
                                                <td>{{flow.assignedUser}}</td>
                                                <td>{{flow.createdDate}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane" id="srd">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Type</th>
                                                <th>Documents</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Request Documents</td>
                                                <td *ngIf="requestDocuments?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDocuments()">Download</button>
                                                </td>
                                                <td *ngIf="requestDocuments?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Payment Confirmation</td>
                                                <td *ngIf="paymentConfirmation?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadPaymentConfirmation()">Download</button>
                                                </td>
                                                <td *ngIf="paymentConfirmation?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Invoice</td>
                                                <td *ngIf="invoiceDocs?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadInvoice()">Download</button>
                                                </td>
                                                <td *ngIf="invoiceDocs?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Supporting Documents</td>
                                                <td *ngIf="dispatchDocsList?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDispatchDocs()">Download</button>
                                                </td>
                                                <td *ngIf="dispatchDocsList?.length == 0"></td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="requestAssignTaskPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="viewOfficerRequest" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none; " data-backdrop="static">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View Request</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="requestForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#orii"><i
                                            class="fa fa-info-circle"></i>
                                        Requester Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#orit"><i class="fa fa-th-list"></i>
                                        Request Items</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#rrif"><i class="fa fa-list-ul"></i>
                                        Request Flow</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#vord"><i class="fa fa-files-o"></i>
                                        Documents</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="orii">
                                <form [formGroup]="requestForm">
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Username</label>
                                            <input formControlName="userName" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Request Type</label>
                                            <input formControlName="requestTypeName" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Format
                                                Type</label>
                                            <input formControlName="formatType" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Method</label>
                                            <input formControlName="deliveryMethod" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div *ngIf="this.requestForm.get('formatType').value.includes('Email') || this.requestForm.get('formatType').value.includes('FTP')"
                                            class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Email</label>
                                            <input formControlName="email" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                1</label>
                                            <input formControlName="postalAddress1" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                2</label>
                                            <input formControlName="postalAddress2" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                3</label>
                                            <input formControlName="postalAddress3" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane" id="orit">
                                <div class="row">
                                    <div class="form-group col-md-12">
                                        <button type="button" class="btn btn-primary" data-toggle="modal"
                                            data-target="#addRequestItem">
                                            <i class="fa fa-plus"></i> Add Cost Item
                                        </button>
                                    </div>
                                    <div class="col-sm-12">
                                        <table class="table table-sm">
                                            <thead style="background-color:#f6f6f6;font-size: 14px;">
                                                <tr>
                                                    <th>Item</th>
                                                    <th>Actions</th>
                                                    <th>Cost</th>
                                                    <th>Remove</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of selectedRequestItems; let i = index">
                                                    <td>
                                                        {{item.gazetteType1}}
                                                    </td>
                                                    <td>
                                                        <button *ngIf="item.requestGazetteType == 'REQUEST'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Search Request Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'COST_ITEM'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Request Cost Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'SEARCH'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Show Item Details
                                                            <span class="caret"></span>
                                                        </button>
                                                    </td>
                                                    <td>
                                                            <span *ngIf="item.requestCost !== '0.00'">R {{item.requestCost}}</span>
                                                            <span *ngIf="item.requestCost == '0.00'"></span>
    
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-danger btn-sm" type="button"
                                                            (click)="deleteRequestItem(item.requestItemCode)"><i
                                                                class="fa fa-close "></i></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="rrif">
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Request Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskReferenceCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Open Date : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskOpenDate}}</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <!-- <th>Task Code</th> -->
                                                <!-- <th>Task Open Date</th> -->
                                                <th>Task Done By</th>
                                                <th>Task Status</th>
                                                <th>Task Assigned To</th>
                                                <th>Action Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let flow of tasklifecycle">
                                                <!-- <td>
                                                    {{flow.taskCode}}
                                                </td> -->

                                                <!-- <td>{{flow.taskOpenDate}}</td> -->
                                                <td>{{flow.taskDoneUserName}}</td>
                                                <td *ngIf="flow.assignedUser !== null">
                                                    {{flow.taskStatus}}
                                                </td>
                                                <td *ngIf="flow.assignedUser == null">
                                                    Initiated
                                                </td>
                                                <td>{{flow.assignedUser}}</td>
                                                <td>{{flow.createdDate}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane" id="vord">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Type</th>
                                                <th>Documents</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Request Documents</td>
                                                <td *ngIf="requestDocuments?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDocuments()">Download</button>
                                                </td>
                                                <td *ngIf="requestDocuments?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Payment Confirmation</td>
                                                <td *ngIf="paymentConfirmation?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadPaymentConfirmation()">Download</button>
                                                </td>
                                                <td *ngIf="paymentConfirmation?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Invoice</td>
                                                <td *ngIf="invoiceDocs?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadInvoice()">Download</button>
                                                </td>
                                                <td *ngIf="invoiceDocs?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Supporting Documents</td>
                                                <td *ngIf="dispatchDocsList?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDispatchDocs()">Download</button>
                                                </td>
                                                <td *ngIf="dispatchDocsList?.length == 0"></td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 col-12 vertical-tabs bottom-30">
                        <div class="row pl-3 pr-3">
                            <ul class="nav flex-column left col-3">
                                <li class="nav-item" *ngFor="let element of targets; let i = index">
                                    <a class="nav-link"
                                        *ngIf="i == 0 && isManager && selectedRequest.provinceCode == userProvinceCode"
                                        (click)="selectFlow('flow3')" href="#lb2" data-toggle="tab">Assign to
                                        Officer</a>
                                    <a class="nav-link" *ngIf="element.restRequest == 'generateInvoice'"
                                        (click)="selectFlow('flow4')" href="#ogi" data-toggle="tab">Generate Invoice</a>
                                    <a class="nav-link" *ngIf="element.restRequest == 'restUploadPOP'"
                                        (click)="selectFlow('flow5')" href="#oup" data-toggle="tab">Payment</a>
                                    <a class="nav-link" *ngIf="element.restRequest == 'popVerified'"
                                        (click)="selectFlow('flow6')" href="#pvs" data-toggle="tab">Verify</a>
                                    <a class="nav-link" *ngIf="element.restRequest == 'restScrutinise'"
                                        (click)="selectFlow('flow7')" href="#dsp" data-toggle="tab">Upload Supporting Documents</a>
                                </li>
                            </ul>
                            <div class="tab-content col-9">
                                <div class="tab-pane" id="lb2">
                                    <div class="col-sm-6">
                                        <label class="form-control-label">Select Officer</label>
                                        <select (change)="changeInfoManageToOfficer($event.target.value)"
                                            class="form-control">
                                            <option value=""></option>
                                            <option value="{{t.userCode}}={{t.userName}}" *ngFor="let t of officers">
                                                {{t.firstName}} {{t.surname}}</option>
                                        </select>
                                        <span class="help-block text-danger"
                                            *ngIf="hasInfoManagerError && selectedInfoOfficer.length === 0"> *
                                            required</span>
                                    </div>
                                </div>
                                <div class="tab-pane" id="ogi">
                                    <div *ngIf="selectedRequest !== undefined" class="col-sm-12">
                                        <button type="button" class="btn btn-outline-warning"
                                            (click)="generateInvoice()">Generate Invoice</button>
                                        <span style="padding-left: 20px; font-size: 18px;">Total Cost:
                                            <u>R {{selectedRequest.totalAmount}}</u></span>
                                    </div>
                                    <div *ngIf="generatedInvoice" class="col-sm-8">
                                        <button type="button" style="border:none;" class="btn btn-outline-primary"
                                            (click)="downloadInvoice()">Download Invoice</button>

                                    </div>
                                </div>
                                <div class="tab-pane" id="oup">
                                    <div class="col-sm-12">
                                        <label for="input-payment-city" class="control-label">Payment
                                            Confirmation</label>
                                        <span class="help-block text-danger" *ngIf="uploadedPop">* (required)</span>
                                        <div class="input-group file-upload">
                                            <input type="file" multiple (change)="fileupload(input1)" #input1
                                                class="file-upload-btn" />
                                            <input type="text" class="form-control col-sm-6" style="font-size: 12px;"
                                                value="{{paymentFile}}">
                                            <span class="input-group-btn">
                                                <button class="btn btn-primary" style="font-size: 16px;"
                                                    type="button"><i class="fa fa-folder-open-o" aria-hidden="true"></i>
                                                    Browse..</button>
                                            </span>
                                        </div>
                                    </div>
                                    <div *ngIf="requestForm.get('popFilePath').value" class="col-sm-12"
                                        style="text-align:right;">
                                        <button type="button" class="btn btn-outline-warning" style=" font-size: 12px;"
                                            (click)="downloadPaymentConfirmation()">Download POP</button>

                                    </div>
                                    <form #form="ngForm">
                                        <div *ngIf="requestForm.get('popFilePath').value" class="col-sm-9">
                                            <label for="input-payment-city" class="control-label">Cashier Email Address
                                                to
                                                send POP:</label>
                                            <input [(ngModel)]="cashierEmailAddress" id="cashierEmailAddress"
                                                name="cashierEmailAddress" maxlength="100" class="form-control"
                                                type="text">
                                            <span class="help-block text-danger" *ngIf="invalidCashierEmail">* enter
                                                valid email address</span>
                                        </div>
                                        <div *ngIf="requestForm.get('popFilePath').value" class="col-sm-12"
                                            style="text-align:right;">
                                            <button type="button" class="btn btn-outline-warning"
                                                style=" font-size: 12px;" (click)="sendEmailToCashier()">Send
                                                Email</button>
                                        </div>
                                    </form>
                                </div>
                                <div class="tab-pane" id="pvs">
                                    <form [formGroup]="verifyForm">
                                        <div style="padding-bottom: 20px;" class="col-sm-9">
                                            <div class="abc-checkbox abc-checkbox-primary">
                                                <input id="checkbox312" formControlName="verify" type="checkbox">
                                                <label style="font-size: 18px; color: #f8ac40;"
                                                    for="checkbox312">Payment Verified</label>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="tab-pane" id="dsp">
                                    <div class="form-group col-sm-12 row text-sm-left">
                                        <div class="input-group file-upload">
                                            <label class="col-sm-2 form-control-label m-t-8">Upload Documents:</label>
                                            <i class="fa fa-times delete-file" (click)="removeFile()"
                                                *ngIf="dispatchFile"></i>
                                            <input type="file" multiple (change)="fileDispatchUpload(inputdispatch)"
                                                #inputdispatch class="file-upload-btn" />
                                            <input type="text" class="form-control col-sm-8"
                                                placeholder="Choose a file..." value="{{dispatchFile}}">
                                            <span class="input-group-btn">
                                                <button class="btn btn-primary" type="button"><i
                                                        class="fa fa-folder-open-o" aria-hidden="true"></i>
                                                    Browse..</button>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12 row text-sm-left">
                                        <label class="col-sm-2 form-control-label m-t-8">Documents:</label>
                                        <div class="col-sm-8">
                                            <div class="card" style="height: 150px; overflow-y: auto;">
                                                <div>
                                                    <ul class="list-group" *ngFor="let docs of getdoclist">
                                                        <li class="list-group-item">
                                                            <span>{{docs.substring(docs.lastIndexOf('/')+1)}}</span><span
                                                                style="cursor:pointer;"
                                                                (click)="deleteDispatchDocument(docs)">
                                                                &nbsp;<i class="fa fa-trash text-danger"></i></span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="col-sm-12">
                                            <label for="input-payment-city" class="control-label">Description:</label>
                                            <textarea (change)="descValue($event.target.value)" rows="4"
                                                class="form-control checking-field"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" *ngIf="selectedFlow == 'flow3'" class="btn btn-primary"
                    (click)="submitInformationManagerTask()">Submit & Close
                    Task</button>
                <button type="button" *ngIf="generatedInvoice && selectedFlow == 'flow4'" class="btn btn-primary"
                    (click)="sendEmailWithInvoice()">Send Email With Invoice</button>
                <button type="button" *ngIf="uploadedPop && selectedFlow == 'flow5'" class="btn btn-primary"
                    (click)="uploadPaymentConfirmation()">Done</button>
                <button type="button" *ngIf="verifyForm.get('verify').value == true && selectedFlow == 'flow6'"
                    class="btn btn-primary" (click)="submitInformationManagerTask()">Done</button>
                <button type="button" *ngIf="getdoclist && selectedFlow == 'flow7'" class="btn btn-primary"
                    (click)="submitInformationManagerTask()">Send to Scrutiniser</button>
                <button type="button" id="requestPopAssignTaskPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="viewSrutiniserRequest" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none;">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View Request</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="requestForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#srii"><i
                                            class="fa fa-info-circle"></i>
                                        Requester Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#srit"><i class="fa fa-th-list"></i>
                                        Request Items</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#srif"><i class="fa fa-list-ul"></i>
                                        Request Flow</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#vsrd"><i class="fa fa-files-o"></i>
                                        Documents</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="srii">
                                <form [formGroup]="requestForm">
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Username</label>
                                            <input formControlName="userName" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Request Type</label>
                                            <input formControlName="requestTypeName" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Format
                                                Type</label>
                                            <input formControlName="formatType" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Method</label>
                                            <input formControlName="deliveryMethod" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div *ngIf="this.requestForm.get('formatType').value.includes('Email') || this.requestForm.get('formatType').value.includes('FTP')"
                                            class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Email</label>
                                            <input formControlName="email" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                1</label>
                                            <input formControlName="postalAddress1" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                2</label>
                                            <input formControlName="postalAddress2" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                3</label>
                                            <input formControlName="postalAddress3" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane" id="srit">
                                <div class="row">
                                    <div class="form-group col-md-12">
                                        <button type="button" class="btn btn-primary" data-toggle="modal"
                                            data-target="#addRequestItem">
                                            <i class="fa fa-plus"></i> Add Cost Item
                                        </button>
                                    </div>
                                    <div class="col-sm-12">
                                        <table class="table table-sm">
                                            <thead style="background-color:#f6f6f6;font-size: 14px;">
                                                <tr>
                                                    <th>Item</th>
                                                    <th>Actions</th>
                                                    <th>Cost</th>
                                                    <th>Remove</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of selectedRequestItems; let i = index">
                                                    <td>
                                                        {{item.gazetteType1}}
                                                    </td>
                                                    <td>
                                                        <button *ngIf="item.requestGazetteType == 'REQUEST'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Search Request Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'COST_ITEM'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Request Cost Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'SEARCH'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Show Item Details
                                                            <span class="caret"></span>
                                                        </button>
                                                    </td>
                                                    <td>
                                                            <span *ngIf="item.requestCost !== '0.00'">R {{item.requestCost}}</span>
                                                            <span *ngIf="item.requestCost == '0.00'"></span>
    
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-danger btn-sm" type="button"
                                                            (click)="deleteRequestItem(item.requestItemCode)"><i
                                                                class="fa fa-close "></i></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="srif">
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Request Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskReferenceCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Open Date : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskOpenDate}}</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <!-- <th>Task Code</th> -->

                                                <!-- <th>Task Open Date</th> -->
                                                <th>Task Done By</th>
                                                <th>Task Status</th>
                                                <th>Task Assigned To</th>
                                                <th>Action Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let flow of tasklifecycle">
                                                <!-- <td>
                                                    {{flow.taskCode}}
                                                </td> -->

                                                <!-- <td>{{flow.taskOpenDate}}</td> -->
                                                <td>{{flow.taskDoneUserName}}</td>
                                                <td *ngIf="flow.assignedUser !== null">
                                                    {{flow.taskStatus}}
                                                </td>
                                                <td *ngIf="flow.assignedUser == null">
                                                    Initiated
                                                </td>
                                                <td>{{flow.assignedUser}}</td>
                                                <td>{{flow.createdDate}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane" id="vsrd">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Type</th>
                                                <th>Documents</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Request Documents</td>
                                                <td *ngIf="requestDocuments?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDocuments()">Download</button>
                                                </td>
                                                <td *ngIf="requestDocuments?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Payment Confirmation</td>
                                                <td *ngIf="paymentConfirmation?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadPaymentConfirmation()">Download</button>
                                                </td>
                                                <td *ngIf="paymentConfirmation?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Invoice</td>
                                                <td *ngIf="invoiceDocs?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadInvoice()">Download</button>
                                                </td>
                                                <td *ngIf="invoiceDocs?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Supporting Documents</td>
                                                <td *ngIf="dispatchDocsList?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDispatchDocs()">Download</button>
                                                </td>
                                                <td *ngIf="dispatchDocsList?.length == 0"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 col-12 vertical-tabs bottom-30">
                        <div class="row pl-3 pr-3">
                            <ul class="nav flex-column left col-3">
                                <li class="nav-item" *ngFor="let element of targets">
                                    <a class="nav-link" *ngIf="element.restRequest == 'restFinalise'"
                                        (click)="selectFlow('flow7')" href="#rfc" data-toggle="tab">Quality
                                        Assurance</a>
                                </li>
                            </ul>
                            <div class="tab-content col-9">
                                <div class="tab-pane" id="rfc">
                                    <div class="col-sm-8">
                                        <button type="button" class="btn btn-outline-primary"
                                            (click)="downloadDispatchDocs()">Download Docs</button>

                                    </div>
                                    <div class="col-sm-12">
                                        <form [formGroup]="taskDescForm">
                                            <label for="input-payment-city" class="control-label">Description:</label>
                                            <textarea disabled formControlName="taskDescription" rows="4"
                                                class="form-control checking-field"></textarea>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-success" (click)="dispatchDocs()">Accept Request</button> -->
                <button type="button" class="btn btn-success" (click)="acceptRequest()">Accept Request</button>
                <button type="button" class="btn btn-danger" (click)="rejectRequest()">Reject Request</button>
                <button type="button" id="dispatchRequestPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="viewOfficerDispatchRequest" tabindex="-1" role="dialog" aria-labelledby="modal-large-label"
    style="display: none;">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header state modal-primary" style="color : white; background : #0e4f76;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    View Request</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form class="row" [formGroup]="requestForm">
                    <div class="col-lg-12 col-12 bottom-30">
                        <div class="clearfix">
                            <ul class="nav nav-tabs top pull-left w-100p">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#sriid"><i
                                            class="fa fa-info-circle"></i>
                                        Requester Info</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#sritd"><i class="fa fa-th-list"></i>
                                        Request Items</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#srifd"><i class="fa fa-list-ul"></i>
                                        Request Flow</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#vsrdd"><i class="fa fa-files-o"></i>
                                        Documents</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content top">
                            <div class="tab-pane active" id="sriid">
                                <form [formGroup]="requestForm">
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Username</label>
                                            <input formControlName="userName" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label class="form-control-label">Request Type</label>
                                            <input formControlName="requestTypeName" maxlength="100"
                                                class="form-control" type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Format
                                                Type</label>
                                            <input formControlName="formatType" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Method</label>
                                            <input formControlName="deliveryMethod" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div *ngIf="this.requestForm.get('formatType').value.includes('Email') || this.requestForm.get('formatType').value.includes('FTP')"
                                            class="form-group col-md-4"><label class="form-control-label">Delivery
                                                Email</label>
                                            <input formControlName="email" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                1</label>
                                            <input formControlName="postalAddress1" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                2</label>
                                            <input formControlName="postalAddress2" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                        <div class="form-group col-md-6"><label class="form-control-label">Postal
                                                Address
                                                3</label>
                                            <input formControlName="postalAddress3" maxlength="100" class="form-control"
                                                type="text">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="tab-pane" id="sritd">
                                <div class="row">
                                    <div class="form-group col-md-12">
                                        <button type="button" class="btn btn-primary" data-toggle="modal"
                                            data-target="#addRequestItem">
                                            <i class="fa fa-plus"></i> Add Cost Item
                                        </button>
                                    </div>
                                    <div class="col-sm-12">
                                        <table class="table table-sm">
                                            <thead style="background-color:#f6f6f6;font-size: 14px;">
                                                <tr>
                                                    <th>Item</th>
                                                    <th>Actions</th>
                                                    <th>Cost</th>
                                                    <th>Remove</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of selectedRequestItems; let i = index">
                                                    <td>
                                                        {{item.gazetteType1}}
                                                    </td>
                                                    <td>
                                                        <button *ngIf="item.requestGazetteType == 'REQUEST'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Search Request Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'COST_ITEM'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Request Cost Details
                                                            <span class="caret"></span>
                                                        </button>
                                                        <button *ngIf="item.requestGazetteType == 'SEARCH'"
                                                            class="btn btn-outline-warning btn-md btn-rounded"
                                                            style="height: 32px;font-size: 14px;"
                                                            (click)="selectItem(i, item)" data-toggle="modal"
                                                            data-target="#showResultJson" type="button"> <i
                                                                class="fa fa-download"></i>
                                                            Show Item Details
                                                            <span class="caret"></span>
                                                        </button>
                                                    </td>
                                                    <td>
                                                            <span *ngIf="item.requestCost !== '0.00'">R {{item.requestCost}}</span>
                                                            <span *ngIf="item.requestCost == '0.00'"></span>    
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-danger btn-sm" type="button"
                                                            (click)="deleteRequestItem(item.requestItemCode)"><i
                                                                class="fa fa-close "></i></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="srifd">
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Request Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskReferenceCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Code : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskCode}}</label>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-control-label">Task Open Date : </label>
                                        <label *ngIf="selectedTask" style="color: blue;"
                                            class="form-control-label">{{selectedTask.taskOpenDate}}</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <!-- <th>Task Code</th> -->

                                                <!-- <th>Task Open Date</th> -->
                                                <th>Task Done By</th>
                                                <th>Task Status</th>
                                                <th>Task Assigned To</th>
                                                <th>Action Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let flow of tasklifecycle">
                                                <!-- <td>
                                                {{flow.taskCode}}
                                            </td> -->

                                                <!-- <td>{{flow.taskOpenDate}}</td> -->
                                                <td>{{flow.taskDoneUserName}}</td>
                                                <td *ngIf="flow.assignedUser !== null">
                                                    {{flow.taskStatus}}
                                                </td>
                                                <td *ngIf="flow.assignedUser == null">
                                                    Initiated
                                                </td>
                                                <td>{{flow.assignedUser}}</td>
                                                <td>{{flow.createdDate}}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane" id="vsrdd">
                                <div class="row">
                                    <table class="table table-sm">
                                        <thead style="background-color:#f6f6f6;font-size: 14px;">
                                            <tr>
                                                <th>Type</th>
                                                <th>Documents</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Request Documents</td>
                                                <td *ngIf="requestDocuments?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDocuments()">Download</button>
                                                </td>
                                                <td *ngIf="requestDocuments?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Payment Confirmation</td>
                                                <td *ngIf="paymentConfirmation?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadPaymentConfirmation()">Download</button>
                                                </td>
                                                <td *ngIf="paymentConfirmation?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Invoice</td>
                                                <td *ngIf="invoiceDocs?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadInvoice()">Download</button>
                                                </td>
                                                <td *ngIf="invoiceDocs?.length == 0"></td>
                                            </tr>
                                            <tr>
                                                <td>Supporting Documents</td>
                                                <td *ngIf="dispatchDocsList?.length > 0">
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="downloadDispatchDocs()">Download</button>
                                                </td>
                                                <td *ngIf="dispatchDocsList?.length == 0"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 col-12 vertical-tabs bottom-30">
                        <div class="row pl-3 pr-3">
                            <ul class="nav flex-column left col-3">
                                <li class="nav-item" *ngFor="let element of targets">
                                    <a class="nav-link" *ngIf="element.restRequest == 'restFinalise'"
                                        (click)="selectFlow('flow8')" href="#rdc" data-toggle="tab">Dispatch</a>
                                </li>
                            </ul>
                            <div class="tab-content col-9">
                                <div class="tab-pane" id="rdc">
                                    <div class="col-sm-8">
                                        <button type="button" class="btn btn-outline-primary"
                                            (click)="downloadDispatchDocs()">Download Docs</button>
                                    </div>
                                    <form #form="ngForm">
                                        <div class="col-sm-12">
                                            <label for="input-payment-city" class="control-label">Tracking
                                                Number:</label>
                                            <input [(ngModel)]="trackingNumber" id="trackingNumber"
                                                name="trackingNumber" maxlength="25" class="form-control" type="text">
                                        </div>
                                        <!-- <div class="col-sm-12" style="text-align:right;">
                                                <button type="button" class="btn btn-outline-warning" style=" font-size: 12px;"
                                                    (click)="submitTrackingNumber()">Submit</button>
                                            </div> -->
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-success" (click)="dispatchDocs()">Accept Request</button> -->
                <button type="button" class="btn btn-success" (click)="dispatchDocs()">Dispatch</button>
                <button type="button" id="dispatchedRequestPopup" class="btn btn-default"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="showResultJson" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true " data-backdrop="static" data-keyboard="false">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog  modal-lg" role="document " style="width:620px">
        <div class="modal-content ">
            <div class="modal-header" style="color : white; background : #db8636;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    Request Item Info</h6>
            </div>
            <div class="modal-body">
                <div class="form-group col-md-12">
                    <table class="table table-sm">
                        <tbody>
                            <tr *ngFor="let item of jsonToBeUsed; let i = index">
                                <td *ngIf="item.key == 'gazetteType1'">
                                    Category
                                </td>
                                <td *ngIf="item.key == 'gazetteType2'">
                                    Sub Category
                                </td>
                                <td *ngIf="item.key == 'requestCost'">
                                    Request Cost
                                </td>
                                <td
                                    *ngIf="item.key !== 'requestCost' && item.key !== 'gazetteType1' && item.key !== 'gazetteType2'">
                                    {{item.key}}
                                </td>
                                <td>
                                    {{item.value}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-previous" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addRequestItem" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true " data-backdrop="static" data-keyboard="false">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner>
    <div class="modal-dialog " role="document " style="width:320px">
        <div class="modal-content ">
            <div class="modal-header" style="color : white; background : #db8636;">
                <h6 class="modal-title"><i class="fa fa-check-circle" style="color:#fff;font-size: 18px;"
                        aria-hidden="true"></i>
                    Select Cost Category</h6>
            </div>
            <div class="modal-body">
                <form [formGroup]="categoryForm">
                    <fieldset class="required">
                        <div class="form-group">
                            <label for="input-payment-city" class="control-label">Category</label>
                            <span class="help-block text-danger"
                                *ngIf="hasCategoryError && categoryForm.get('category').hasError('required')">*
                                (required)</span>
                            <!-- <select formControlName="category" class="form-control" (change)="getSubCategories()">
                                <option value=""></option>
                                <option value="{{t.categoryCode}}={{t.categoryName}}" *ngFor="let t of categories">
                                    {{t.categoryName}}
                                </option>
                            </select> -->
                            <input disabled formControlName="category" class="form-control" type="text">
                        </div>
                        <div *ngIf="categoryForm.get('category').value.length > 0" class="form-group required">
                            <label for="input-payment-city" class="control-label">Sub Category</label>
                            <span class="help-block text-danger"
                                *ngIf="hasCategoryError && categoryForm.get('subcategory').hasError('required')">*
                                (required)</span>
                            <!-- <select formControlName="subcategory" class="form-control" (change)="setCostForItem()">
                                <option value=""></option>
                                <option
                                    value="{{t.costSubCategoryCode}}={{t.costSubCategoryName}}"
                                    *ngFor="let t of subCategories">
                                    {{t.costSubCategoryName}}
                                </option>
                            </select> -->
                            <input disabled formControlName="subcategory" class="form-control" type="text">
                        </div>
                        <div *ngIf="costType == 'Hour Rate' && categoryForm.get('subcategory').value.length > 0"
                            class="form-group required">
                            <label for="input-payment-city" class="control-label">Time Taken (in hours)</label>
                            <span class="help-block text-danger" *ngIf="numberRegexError">* only numbers allowed</span>
                            <input formControlName="hours" maxlength="10" (keyup)="calculateRate($event)"
                                class="form-control" type="text">
                        </div>
                        <div *ngIf="costType == 'Fixed Rate' && categoryForm.get('subcategory').value.length > 0"
                            class="form-group required">
                            <label for="input-payment-city" class="control-label">Quantity</label>
                            <span class="help-block text-danger" *ngIf="numberRegexError">* only numbers allowed</span>
                            <input formControlName="quantity" maxlength="10" (keyup)="calculateRate($event)"
                                class="form-control" type="text">
                        </div>
                        <div *ngIf="costType == 'Half Hour Rate' && categoryForm.get('subcategory').value.length > 0"
                            class="form-group required">
                            <label for="input-payment-city" class="control-label">Time Taken (in min)</label>
                            <span class="help-block text-danger" *ngIf="numberRegexError">* only numbers allowed</span>
                            <input formControlName="hours" maxlength="10" (keyup)="calculateRate($event)"
                                class="form-control" type="text">
                        </div>
                        <div *ngIf="categoryForm.get('subcategory').value.length > 0" class="form-group required">
                            <label for="input-payment-city" class="control-label">Request Cost</label>
                            <input formControlName="requestCost" disabled class="form-control" type="text">
                        </div>
                    </fieldset>
                </form>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-primary" (click)="updateCategory()">Add</button>
                <button type="button" id="btnAddRequestItemPopupClose" class="btn btn-previous"
                    data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>